var e=(e,s,t)=>new Promise((a,l)=>{var r=e=>{try{i(t.next(e))}catch(s){l(s)}},n=e=>{try{i(t.throw(e))}catch(s){l(s)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,n);i((t=t.apply(e,s)).next())});import{r as s,j as t}from"./ui-BA0cATE-.js";import{B as a,C as l,a as r,b as n,c as i}from"./button-DKtl-THQ.js";import{B as c}from"./badge-DQ5FJ1CI.js";import{S as o,a as d,b as m,c as x,d as h}from"./select-BSwI4t9y.js";import{T as u,a as j,b as y,c as g,P as f}from"./progress-Du49IGm3.js";import{u as p,t as v,i as N,m as b,s as S,k as w}from"./index-JY87KjIa.js";import{k,a6 as E,n as D,ac as A,m as M,q as T,a7 as C,ad as W,ae as P,g as K,af as O,ab as I}from"./icons-DpmH63Q2.js";import{R as Q,e as F,f as $,g as G,h as L,i as B,T as R,P as U,a as J,C as V,B as _,b as z,X as H,Y,d as q,A as X,j as Z,L as ee,c as se}from"./charts-CqDaeyS0.js";import"./vendor-Z2Iecplj.js";import"./utils-Dyq5Ev4R.js";import"./index-B7-UbheF.js";const te=()=>{const{currentUser:te}=p(),[ae,le]=s.useState("week"),[re,ne]=s.useState("overview"),[ie,ce]=s.useState(!0),[oe,de]=s.useState(!1),[me,xe]=s.useState({tasks:[],moodEntries:[],studySessions:[],focusSessions:[]}),[he,ue]=s.useState({productivityScore:0,consistencyScore:0,improvementAreas:[],achievements:[],recommendations:[],weeklyTrend:"stable",studyEfficiency:0,focusQuality:0,moodStability:0,overallWellness:0});s.useEffect(()=>{e(null,null,function*(){try{const e=yield fetch("https://sentience.onrender.com/api/health");if(de(e.ok),te){if(!e.ok)return v({title:"Analytics unavailable",description:"Server is unreachable. Please try again shortly.",variant:"destructive"}),void xe({tasks:[],moodEntries:[],studySessions:[],focusSessions:[]});const[s,t,a,l]=yield Promise.all([N.getAll().catch(()=>[]),b.getAll().catch(()=>[]),S.getAll().catch(()=>[]),w.getAll().catch(()=>[])]);xe({tasks:s,moodEntries:t,studySessions:a,focusSessions:l})}else{const e=JSON.parse(localStorage.getItem("tasks")||"[]"),s=JSON.parse(localStorage.getItem("moodEntries")||"[]"),t=JSON.parse(localStorage.getItem("studySessions")||"[]"),a=JSON.parse(localStorage.getItem("focusSessions")||"[]");xe({tasks:e,moodEntries:s,studySessions:t,focusSessions:a})}}catch(e){console.error("Error loading analytics data:",e),v({title:"Error loading data",description:"Failed to load analytics data. Please try again.",variant:"destructive"})}finally{ce(!1)}})},[te]),s.useEffect(()=>{if(me.tasks.length>0||me.moodEntries.length>0||me.studySessions.length>0){const e=je();ue(e)}},[me]);const je=()=>{const e=me.tasks.filter(e=>"done"===e.status).length,s=me.tasks.length,t=s>0?Math.round(e/s*100):0,a=new Set([...me.tasks,...me.moodEntries,...me.studySessions].map(e=>new Date(e.date||e.createdAt).toDateString())).size,l=Math.round(a/7*100),r=[];t<70&&r.push("Task completion rate"),l<50&&r.push("Daily consistency"),me.moodEntries.length<3&&r.push("Mood tracking"),me.studySessions.length<5&&r.push("Study sessions");const n=[];t>=80&&n.push("High productivity"),l>=70&&n.push("Great consistency"),me.moodEntries.length>=7&&n.push("Regular mood tracking"),me.studySessions.length>=10&&n.push("Dedicated studying");const i=[];t<70&&i.push("Focus on completing tasks rather than starting new ones"),l<50&&i.push("Try to maintain daily activity, even if small"),me.moodEntries.length<3&&i.push("Track your mood daily to understand patterns"),me.studySessions.length<5&&i.push("Schedule regular study sessions");const c=[...me.tasks,...me.studySessions].filter(e=>{const s=new Date(e.date||e.createdAt),t=new Date;return t.setDate(t.getDate()-7),s>=t}),o=[...me.tasks,...me.studySessions].filter(e=>{const s=new Date(e.date||e.createdAt),t=new Date;t.setDate(t.getDate()-14);const a=new Date;return a.setDate(a.getDate()-7),s>=t&&s<a});let d="stable";c.length>1.2*o.length?d="improving":c.length<.8*o.length&&(d="declining");const m=me.studySessions.length>0?Math.min(100,me.studySessions.reduce((e,s)=>e+s.duration,0)/(60*me.studySessions.length)*100):0,x=me.focusSessions.length>0?Math.min(100,me.focusSessions.filter(e=>"work"===e.type).reduce((e,s)=>e+s.duration,0)/60):0,h=me.moodEntries.length>0?me.moodEntries.reduce((e,s)=>e+{terrible:1,bad:2,neutral:3,good:4,excellent:5}[s.mood],0)/me.moodEntries.length:3,u=me.moodEntries.length>0?Math.max(0,100-me.moodEntries.reduce((e,s)=>e+Math.abs({terrible:1,bad:2,neutral:3,good:4,excellent:5}[s.mood]-h),0)/me.moodEntries.length*20):0,j=Math.round((t+l+m+x+u)/5);return{productivityScore:t,consistencyScore:l,improvementAreas:r,achievements:n,recommendations:i,weeklyTrend:d,studyEfficiency:Math.round(m),focusQuality:Math.round(x),moodStability:Math.round(u),overallWellness:j}},ye=e=>e>=4.5?"Excellent":e>=3.5?"Good":e>=2.5?"Neutral":e>=1.5?"Bad":"Terrible",ge=(e=>{const s={terrible:1,bad:2,neutral:3,good:4,excellent:5};return Array.from({length:7},(e,s)=>{const t=new Date;return t.setDate(t.getDate()-s),t.toISOString().split("T")[0]}).reverse().map(t=>{const a=e.filter(e=>e.date.startsWith(t)),l=a.length>0?a.reduce((e,t)=>e+s[t.mood],0)/a.length:void 0;return{day:new Date(t).toLocaleDateString("en-US",{weekday:"short"}),score:l,entries:a.length}})})(me.moodEntries),fe=(pe=me.studySessions,Array.from({length:7},(e,s)=>{const t=new Date;return t.setDate(t.getDate()-s),t.toISOString().split("T")[0]}).reverse().map(e=>{const s=pe.filter(s=>s.date.startsWith(e)),t=s.reduce((e,s)=>e+s.duration,0),a=Math.floor(t/60),l=t%60;return{day:new Date(e).toLocaleDateString("en-US",{weekday:"short"}),hours:a,minutes:l,sessions:s.length}}));var pe;const ve=(Ne=me.focusSessions,Array.from({length:7},(e,s)=>{const t=new Date;return t.setDate(t.getDate()-s),t.toISOString().split("T")[0]}).reverse().map(e=>{const s=Ne.filter(s=>s.date.startsWith(e)).filter(e=>"work"===e.type),t=s.reduce((e,s)=>e+s.duration,0);return{day:new Date(e).toLocaleDateString("en-US",{weekday:"short"}),minutes:t,sessions:s.length}}));var Ne;const be={statusCounts:{todo:(Se=me.tasks).filter(e=>"todo"===e.status).length,in_progress:Se.filter(e=>"in_progress"===e.status).length,done:Se.filter(e=>"done"===e.status).length},priorityCounts:{low:Se.filter(e=>"low"===e.priority).length,medium:Se.filter(e=>"medium"===e.priority).length,high:Se.filter(e=>"high"===e.priority).length}};var Se;const we=["#ef4444","#f59e0b","#10b981"];return ie?t.jsx("div",{className:"page-container",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"text-muted-foreground",children:"Loading analytics..."})})}):t.jsxs("div",{className:"page-container",children:[t.jsx("header",{className:"mb-8 animate-slide-in",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics Dashboard"}),t.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your productivity, mood, and study patterns"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(o,{value:ae,onValueChange:e=>le(e),children:[t.jsx(d,{className:"w-32",children:t.jsx(m,{})}),t.jsxs(x,{children:[t.jsx(h,{value:"week",children:"Week"}),t.jsx(h,{value:"month",children:"Month"}),t.jsx(h,{value:"semester",children:"Semester"})]})]}),t.jsx(a,{onClick:()=>e(null,null,function*(){ce(!0);try{if(oe&&te){const[e,s,t,a]=yield Promise.all([N.getAll().catch(()=>[]),b.getAll().catch(()=>[]),S.getAll().catch(()=>[]),w.getAll().catch(()=>[])]);xe({tasks:e,moodEntries:s,studySessions:t,focusSessions:a})}v({title:"Data updated",description:"Analytics data has been refreshed."})}catch(e){console.error("Error updating data:",e),v({title:"Update failed",description:"Failed to update analytics data.",variant:"destructive"})}finally{ce(!1)}}),disabled:ie,children:"Refresh"})]})]})}),t.jsxs(u,{value:re,onValueChange:ne,className:"space-y-6",children:[t.jsxs(j,{className:"grid w-full grid-cols-5",children:[t.jsx(y,{value:"overview",children:"Overview"}),t.jsx(y,{value:"wellness",children:"Wellness"}),t.jsx(y,{value:"productivity",children:"Productivity"}),t.jsx(y,{value:"mood",children:"Mood"}),t.jsx(y,{value:"study",children:"Study"})]}),t.jsxs(g,{value:"overview",className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs(l,{children:[t.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(n,{className:"text-sm font-medium",children:"Productivity Score"}),t.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(i,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[he.productivityScore,"%"]}),t.jsx(f,{value:he.productivityScore,className:"mt-2"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Task completion rate"})]})]}),t.jsxs(l,{children:[t.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(n,{className:"text-sm font-medium",children:"Consistency Score"}),t.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(i,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[he.consistencyScore,"%"]}),t.jsx(f,{value:he.consistencyScore,className:"mt-2"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Daily activity consistency"})]})]}),t.jsxs(l,{children:[t.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(n,{className:"text-sm font-medium",children:"Weekly Trend"}),(e=>{switch(e){case"improving":return t.jsx(I,{className:"h-4 w-4 text-green-500"});case"declining":return t.jsx(O,{className:"h-4 w-4 text-red-500"});default:return t.jsx(E,{className:"h-4 w-4 text-blue-500"})}})(he.weeklyTrend)]}),t.jsxs(i,{children:[t.jsx("div",{className:`text-2xl font-bold ${(e=>{switch(e){case"improving":return"text-green-600";case"declining":return"text-red-600";default:return"text-blue-600"}})(he.weeklyTrend)}`,children:he.weeklyTrend.charAt(0).toUpperCase()+he.weeklyTrend.slice(1)}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Compared to last week"})]})]}),t.jsxs(l,{children:[t.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(n,{className:"text-sm font-medium",children:"Total Sessions"}),t.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(i,{children:[t.jsx("div",{className:"text-2xl font-bold",children:me.studySessions.length+me.focusSessions.length}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Study + Focus sessions"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(l,{children:[t.jsx(r,{children:t.jsxs(n,{className:"flex items-center gap-2",children:[t.jsx(A,{className:"h-5 w-5"}),"Achievements"]})}),t.jsx(i,{children:he.achievements.length>0?t.jsx("div",{className:"space-y-2",children:he.achievements.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(M,{className:"h-4 w-4 text-yellow-500"}),t.jsx("span",{className:"text-sm",children:e})]},s))}):t.jsx("p",{className:"text-sm text-muted-foreground",children:"Keep working to earn achievements!"})})]}),t.jsxs(l,{children:[t.jsx(r,{children:t.jsxs(n,{className:"flex items-center gap-2",children:[t.jsx(T,{className:"h-5 w-5"}),"Areas for Improvement"]})}),t.jsx(i,{children:he.improvementAreas.length>0?t.jsx("div",{className:"space-y-2",children:he.improvementAreas.map((e,s)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(k,{className:"h-4 w-4 text-blue-500"}),t.jsx("span",{className:"text-sm",children:e})]},s))}):t.jsx("p",{className:"text-sm text-muted-foreground",children:"Great job! No major areas for improvement."})})]})]}),t.jsxs(l,{children:[t.jsx(r,{children:t.jsxs(n,{className:"flex items-center gap-2",children:[t.jsx(C,{className:"h-5 w-5"}),"Personalized Recommendations"]})}),t.jsx(i,{children:he.recommendations.length>0?t.jsx("div",{className:"space-y-3",children:he.recommendations.map((e,s)=>t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-lg",children:[t.jsx(W,{className:"h-4 w-4 text-blue-500 mt-0.5"}),t.jsx("span",{className:"text-sm",children:e})]},s))}):t.jsx("p",{className:"text-sm text-muted-foreground",children:"You're doing great! Keep up the good work."})})]})]}),t.jsxs(g,{value:"wellness",className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs(l,{children:[t.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(n,{className:"text-sm font-medium",children:"Overall Wellness"}),t.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(i,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[he.overallWellness,"%"]}),t.jsx(f,{value:he.overallWellness,className:"mt-2"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:he.overallWellness>=80?"Excellent!":he.overallWellness>=60?"Good":"Needs improvement"})]})]}),t.jsxs(l,{children:[t.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(n,{className:"text-sm font-medium",children:"Study Efficiency"}),t.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(i,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[he.studyEfficiency,"%"]}),t.jsx(f,{value:he.studyEfficiency,className:"mt-2"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:he.studyEfficiency>=80?"Highly efficient":he.studyEfficiency>=60?"Good efficiency":"Room for improvement"})]})]}),t.jsxs(l,{children:[t.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(n,{className:"text-sm font-medium",children:"Focus Quality"}),t.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(i,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[he.focusQuality,"%"]}),t.jsx(f,{value:he.focusQuality,className:"mt-2"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:he.focusQuality>=80?"Excellent focus":he.focusQuality>=60?"Good focus":"Needs work"})]})]}),t.jsxs(l,{children:[t.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(n,{className:"text-sm font-medium",children:"Mood Stability"}),t.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsxs(i,{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[he.moodStability,"%"]}),t.jsx(f,{value:he.moodStability,className:"mt-2"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:he.moodStability>=80?"Very stable":he.moodStability>=60?"Stable":"Variable mood"})]})]})]}),t.jsxs(l,{children:[t.jsx(r,{children:t.jsx(n,{children:"Wellness Profile"})}),t.jsx(i,{children:t.jsx(Q,{width:"100%",height:400,children:t.jsxs(F,{data:[{subject:"Productivity",A:he.productivityScore,fullMark:100},{subject:"Consistency",A:he.consistencyScore,fullMark:100},{subject:"Study Efficiency",A:he.studyEfficiency,fullMark:100},{subject:"Focus Quality",A:he.focusQuality,fullMark:100},{subject:"Mood Stability",A:he.moodStability,fullMark:100}],children:[t.jsx($,{}),t.jsx(G,{dataKey:"subject"}),t.jsx(L,{angle:30,domain:[0,100]}),t.jsx(B,{name:"Your Score",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),t.jsx(R,{})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(l,{children:[t.jsx(r,{children:t.jsxs(n,{className:"flex items-center gap-2",children:[t.jsx(C,{className:"h-5 w-5"}),"Wellness Insights"]})}),t.jsx(i,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Strongest Area"}),t.jsx(c,{variant:"secondary",children:[{name:"Productivity",score:he.productivityScore},{name:"Consistency",score:he.consistencyScore},{name:"Study Efficiency",score:he.studyEfficiency},{name:"Focus Quality",score:he.focusQuality},{name:"Mood Stability",score:he.moodStability}].reduce((e,s)=>e.score>s.score?e:s).name})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Needs Improvement"}),t.jsx(c,{variant:"secondary",children:[{name:"Productivity",score:he.productivityScore},{name:"Consistency",score:he.consistencyScore},{name:"Study Efficiency",score:he.studyEfficiency},{name:"Focus Quality",score:he.focusQuality},{name:"Mood Stability",score:he.moodStability}].reduce((e,s)=>e.score<s.score?e:s).name})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Overall Grade"}),t.jsx(c,{variant:"secondary",children:he.overallWellness>=90?"A+":he.overallWellness>=80?"A":he.overallWellness>=70?"B":he.overallWellness>=60?"C":he.overallWellness>=50?"D":"F"})]})]})})]}),t.jsxs(l,{children:[t.jsx(r,{children:t.jsxs(n,{className:"flex items-center gap-2",children:[t.jsx(W,{className:"h-5 w-5"}),"Wellness Tips"]})}),t.jsx(i,{children:t.jsxs("div",{className:"space-y-3",children:[he.overallWellness<70&&t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 rounded-lg",children:[t.jsx(T,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),t.jsx("span",{className:"text-sm",children:"Focus on building consistent daily habits"})]}),he.studyEfficiency<70&&t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg",children:[t.jsx(D,{className:"h-4 w-4 text-blue-600 mt-0.5"}),t.jsx("span",{className:"text-sm",children:"Try the Pomodoro technique for better study sessions"})]}),he.focusQuality<70&&t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[t.jsx(k,{className:"h-4 w-4 text-green-600 mt-0.5"}),t.jsx("span",{className:"text-sm",children:"Minimize distractions during focus sessions"})]}),he.moodStability<70&&t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 rounded-lg",children:[t.jsx(K,{className:"h-4 w-4 text-purple-600 mt-0.5"}),t.jsx("span",{className:"text-sm",children:"Practice mindfulness and stress management"})]}),he.overallWellness>=80&&t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[t.jsx(P,{className:"h-4 w-4 text-green-600 mt-0.5"}),t.jsx("span",{className:"text-sm",children:"Excellent! Keep up the great work"})]})]})})]})]})]}),t.jsxs(g,{value:"productivity",className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(l,{children:[t.jsx(r,{children:t.jsx(n,{children:"Task Status Distribution"})}),t.jsx(i,{children:t.jsx(Q,{width:"100%",height:300,children:t.jsxs(U,{children:[t.jsx(J,{data:[{name:"To Do",value:be.statusCounts.todo,color:we[0]},{name:"In Progress",value:be.statusCounts.in_progress,color:we[1]},{name:"Done",value:be.statusCounts.done,color:we[2]}],cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",children:[{name:"To Do",value:be.statusCounts.todo,color:we[0]},{name:"In Progress",value:be.statusCounts.in_progress,color:we[1]},{name:"Done",value:be.statusCounts.done,color:we[2]}].map((e,s)=>t.jsx(V,{fill:e.color},`cell-${s}`))}),t.jsx(R,{})]})})})]}),t.jsxs(l,{children:[t.jsx(r,{children:t.jsx(n,{children:"Task Priority Distribution"})}),t.jsx(i,{children:t.jsx(Q,{width:"100%",height:300,children:t.jsxs(_,{data:[{priority:"Low",count:be.priorityCounts.low},{priority:"Medium",count:be.priorityCounts.medium},{priority:"High",count:be.priorityCounts.high}],children:[t.jsx(z,{strokeDasharray:"3 3"}),t.jsx(H,{dataKey:"priority"}),t.jsx(Y,{}),t.jsx(R,{}),t.jsx(q,{dataKey:"count",fill:"#8884d8"})]})})})]})]}),t.jsxs(l,{children:[t.jsx(r,{children:t.jsx(n,{children:"Focus Sessions (Last 7 Days)"})}),t.jsx(i,{children:t.jsx(Q,{width:"100%",height:300,children:t.jsxs(X,{data:ve,children:[t.jsx(z,{strokeDasharray:"3 3"}),t.jsx(H,{dataKey:"day"}),t.jsx(Y,{}),t.jsx(R,{}),t.jsx(Z,{type:"monotone",dataKey:"minutes",stroke:"#8884d8",fill:"#8884d8"})]})})})]})]}),t.jsxs(g,{value:"mood",className:"space-y-6",children:[t.jsxs(l,{children:[t.jsx(r,{children:t.jsx(n,{children:"Mood Trends (Last 7 Days)"})}),t.jsx(i,{children:t.jsx(Q,{width:"100%",height:300,children:t.jsxs(ee,{data:ge,children:[t.jsx(z,{strokeDasharray:"3 3"}),t.jsx(H,{dataKey:"day"}),t.jsx(Y,{domain:[1,5]}),t.jsx(R,{formatter:e=>[ye(e),"Mood Score"],labelFormatter:e=>`Day: ${e}`}),t.jsx(se,{type:"monotone",dataKey:"score",stroke:"#8884d8",strokeWidth:2})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(l,{children:[t.jsx(r,{children:t.jsx(n,{children:"Mood Distribution"})}),t.jsx(i,{children:t.jsx(Q,{width:"100%",height:300,children:t.jsxs(U,{children:[t.jsx(J,{data:[{name:"Excellent",value:me.moodEntries.filter(e=>"excellent"===e.mood).length},{name:"Good",value:me.moodEntries.filter(e=>"good"===e.mood).length},{name:"Neutral",value:me.moodEntries.filter(e=>"neutral"===e.mood).length},{name:"Bad",value:me.moodEntries.filter(e=>"bad"===e.mood).length},{name:"Terrible",value:me.moodEntries.filter(e=>"terrible"===e.mood).length}],cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",children:[{name:"Excellent",value:me.moodEntries.filter(e=>"excellent"===e.mood).length,color:"#10b981"},{name:"Good",value:me.moodEntries.filter(e=>"good"===e.mood).length,color:"#3b82f6"},{name:"Neutral",value:me.moodEntries.filter(e=>"neutral"===e.mood).length,color:"#f59e0b"},{name:"Bad",value:me.moodEntries.filter(e=>"bad"===e.mood).length,color:"#ef4444"},{name:"Terrible",value:me.moodEntries.filter(e=>"terrible"===e.mood).length,color:"#7c3aed"}].map((e,s)=>t.jsx(V,{fill:e.color},`cell-${s}`))}),t.jsx(R,{})]})})})]}),t.jsxs(l,{children:[t.jsx(r,{children:t.jsx(n,{children:"Mood Insights"})}),t.jsx(i,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Total Entries"}),t.jsx(c,{variant:"secondary",children:me.moodEntries.length})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Average Mood"}),t.jsx(c,{variant:"secondary",children:me.moodEntries.length>0?ye(me.moodEntries.reduce((e,s)=>e+{terrible:1,bad:2,neutral:3,good:4,excellent:5}[s.mood],0)/me.moodEntries.length):"No data"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Most Common"}),t.jsx(c,{variant:"secondary",children:me.moodEntries.length>0?(()=>{const e=me.moodEntries.reduce((e,s)=>(e[s.mood]=(e[s.mood]||0)+1,e),{}),s=Object.entries(e).reduce((s,t)=>e[s[0]]>e[t[0]]?s:t);return s[0].charAt(0).toUpperCase()+s[0].slice(1)})():"No data"})]})]})})]})]})]}),t.jsxs(g,{value:"study",className:"space-y-6",children:[t.jsxs(l,{children:[t.jsx(r,{children:t.jsx(n,{children:"Study Time (Last 7 Days)"})}),t.jsx(i,{children:t.jsx(Q,{width:"100%",height:300,children:t.jsxs(_,{data:fe,children:[t.jsx(z,{strokeDasharray:"3 3"}),t.jsx(H,{dataKey:"day"}),t.jsx(Y,{}),t.jsx(R,{formatter:e=>[`${Math.floor(e/60)}h ${e%60}m`,"Study Time"]}),t.jsx(q,{dataKey:"minutes",fill:"#8884d8"})]})})})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(l,{children:[t.jsx(r,{children:t.jsx(n,{children:"Study Insights"})}),t.jsx(i,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Total Sessions"}),t.jsx(c,{variant:"secondary",children:me.studySessions.length})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Total Study Time"}),t.jsx(c,{variant:"secondary",children:me.studySessions.length>0?`${Math.floor(me.studySessions.reduce((e,s)=>e+s.duration,0)/60)}h ${me.studySessions.reduce((e,s)=>e+s.duration,0)%60}m`:"0h 0m"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Average Session"}),t.jsx(c,{variant:"secondary",children:me.studySessions.length>0?`${Math.floor(me.studySessions.reduce((e,s)=>e+s.duration,0)/me.studySessions.length)}m`:"0m"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Most Studied Subject"}),t.jsx(c,{variant:"secondary",children:me.studySessions.length>0?(()=>{const e=me.studySessions.reduce((e,s)=>(e[s.subject]=(e[s.subject]||0)+1,e),{});return Object.entries(e).reduce((s,t)=>e[s[0]]>e[t[0]]?s:t)[0]})():"No data"})]})]})})]}),t.jsxs(l,{children:[t.jsx(r,{children:t.jsx(n,{children:"Subject Breakdown"})}),t.jsx(i,{children:t.jsx(Q,{width:"100%",height:300,children:t.jsxs(U,{children:[t.jsx(J,{data:(()=>{const e=me.studySessions.reduce((e,s)=>(e[s.subject]=(e[s.subject]||0)+1,e),{});return Object.entries(e).map(([e,s])=>({name:e,value:s}))})(),cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",children:(()=>{const e=me.studySessions.reduce((e,s)=>(e[s.subject]=(e[s.subject]||0)+1,e),{}),s=["#8884d8","#82ca9d","#ffc658","#ff7300","#ff0000"];return Object.entries(e).map(([e,t],a)=>({name:e,value:t,color:s[a%s.length]}))})().map((e,s)=>t.jsx(V,{fill:e.color},`cell-${s}`))}),t.jsx(R,{})]})})})]})]})]})]})]})};export{te as default};
