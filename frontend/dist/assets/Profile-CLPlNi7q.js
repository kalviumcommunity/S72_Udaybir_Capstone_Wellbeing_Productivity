var e=Object.defineProperty,r=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(r,a,s)=>a in r?e(r,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[a]=s,n=(e,r)=>{for(var a in r||(r={}))t.call(r,a)&&o(e,a,r[a]);if(s)for(var a of s(r))l.call(r,a)&&o(e,a,r[a]);return e},i=(e,s)=>r(e,a(s));import{r as d,j as c}from"./ui-BA0cATE-.js";import{u as m,a as u,d as g,c as x,L as p,g as h,t as f}from"./index-gkp8X_0E.js";import{X as b,K as j,U as v,G as y,e as N,N as w,n as k,h as C,O as S,I as D,Q as O,V as P,A as U}from"./icons-DpmH63Q2.js";import"./vendor-Z2Iecplj.js";import"./utils-Dyq5Ev4R.js";const A=["Tech University","Central College","State University","Liberal Arts College","Community College","City University"],E=["Computer Science","Mathematics","Physics","Chemistry","Biology","Business","Economics","Psychology","Literature","History","Arts","Engineering"],M=["1st","2nd","3rd","4th","5th","Graduate"],I=()=>{const{currentUser:e,logout:r,updateProfile:a}=m(),s=u(),[t,l]=d.useState(!1),[o,I]=d.useState(!1),[B,T]=d.useState({used:0,total:0,percentage:0}),[L,F]=d.useState({name:(null==e?void 0:e.name)||"",university:(null==e?void 0:e.university)||"",major:(null==e?void 0:e.major)||"",year:(null==e?void 0:e.year)||"",bio:(null==e?void 0:e.bio)||"",gender:(null==e?void 0:e.gender)||"neutral"});d.useEffect(()=>{e||s("/login")},[e,s]),d.useEffect(()=>{T(g.getStorageUsage())},[]);return e?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-muted/10 py-8 px-4",children:c.jsx("div",{className:"max-w-7xl mx-auto",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2",children:c.jsxs("div",{className:"sentience-card p-8 animate-fade-in-up",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Profile"}),c.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your account settings and preferences"})]}),c.jsxs("button",{onClick:()=>l(!t),className:x("flex items-center gap-2 px-6 py-3 text-sm font-medium rounded-lg transition-all duration-200 transform hover:scale-105",t?"text-red-600 bg-red-50 hover:bg-red-100 border border-red-200":"text-primary bg-primary/10 hover:bg-primary/20 border border-primary/20"),children:[t?c.jsx(b,{className:"h-4 w-4"}):c.jsx(j,{className:"h-4 w-4"}),t?"Cancel":"Edit Profile"]})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row items-start space-y-6 lg:space-y-0 lg:space-x-8",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-primary/70 rounded-full blur-lg opacity-20 group-hover:opacity-30 transition-opacity"}),c.jsx("img",{src:e.avatar,alt:e.name,className:"relative w-32 h-32 rounded-full border-4 border-background shadow-xl transition-transform duration-200 group-hover:scale-105"}),c.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:c.jsx(v,{className:"h-4 w-4 text-white"})})]})}),c.jsx("div",{className:"flex-1 space-y-6",children:t?c.jsxs("div",{className:"space-y-6 animate-fade-in-scale",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Full Name"}),c.jsx("input",{type:"text",value:L.name,onChange:e=>F(i(n({},L),{name:e.target.value})),className:"w-full px-4 py-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all",placeholder:"Enter your full name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Gender"}),c.jsxs("select",{value:L.gender,onChange:e=>F(i(n({},L),{gender:e.target.value})),className:"w-full px-4 py-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all",children:[c.jsx("option",{value:"neutral",children:"Prefer not to say"}),c.jsx("option",{value:"male",children:"Male"}),c.jsx("option",{value:"female",children:"Female"}),c.jsx("option",{value:"other",children:"Other"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"University"}),c.jsxs("div",{className:"relative",children:[c.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsxs("select",{value:L.university,onChange:e=>F(i(n({},L),{university:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all",children:[c.jsx("option",{value:"",children:"Select University"}),A.map(e=>c.jsx("option",{value:e,children:e},e))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Major"}),c.jsxs("select",{value:L.major,onChange:e=>F(i(n({},L),{major:e.target.value})),className:"w-full px-4 py-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all",children:[c.jsx("option",{value:"",children:"Select Major"}),E.map(e=>c.jsx("option",{value:e,children:e},e))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Year"}),c.jsxs("div",{className:"relative",children:[c.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsxs("select",{value:L.year,onChange:e=>F(i(n({},L),{year:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all",children:[c.jsx("option",{value:"",children:"Select Year"}),M.map(e=>c.jsx("option",{value:e,children:e},e))]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Bio"}),c.jsx("textarea",{value:L.bio,onChange:e=>F(i(n({},L),{bio:e.target.value})),rows:4,className:"w-full px-4 py-3 border border-border rounded-lg bg-background text-foreground focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all resize-none",placeholder:"Tell us about yourself, your interests, and goals..."})]}),c.jsx("div",{className:"flex gap-3 pt-4",children:c.jsxs("button",{onClick:()=>{if(!e)return;const r=h(L.gender,function(){try{const e=JSON.parse(localStorage.getItem("moodEntries")||"[]");if(!e.length)return"neutral";const r={terrible:1,bad:2,neutral:3,good:4,excellent:5},a=e.reduce((e,a)=>e+(r[a.mood]||3),0)/e.length;return a<=1.5?"terrible":a<=2.5?"bad":a<=3.5?"neutral":a<=4.5?"good":"excellent"}catch(e){return"neutral"}}());a(i(n({},L),{avatar:r})),l(!1)},className:"flex items-center gap-2 px-6 py-3 text-sm font-medium text-white bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg",children:[c.jsx(w,{className:"h-4 w-4"}),"Save Changes"]})})]}):c.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:e.name}),c.jsx("p",{className:"text-muted-foreground text-lg",children:e.email})]}),e.university&&c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted/30 rounded-lg",children:[c.jsx(y,{className:"h-5 w-5 text-primary"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-foreground",children:e.university}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.major," â€¢ ",e.year]})]})]}),e.bio&&c.jsx("div",{className:"p-4 bg-muted/20 rounded-lg border-l-4 border-primary/30",children:c.jsx("p",{className:"text-foreground leading-relaxed",children:e.bio})})]})})]})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"sentience-card p-6 animate-fade-in-up",style:{animationDelay:"0.1s"},children:[c.jsxs("h3",{className:"text-xl font-semibold text-foreground mb-6 flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),"Quick Actions"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs(p,{to:"/tasks",className:"flex items-center gap-3 p-4 text-foreground hover:bg-muted/50 rounded-lg transition-all duration-200 transform hover:scale-105 group",children:[c.jsx("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors",children:c.jsx(k,{className:"h-4 w-4 text-primary"})}),c.jsx("span",{className:"font-medium",children:"View Tasks"})]}),c.jsxs(p,{to:"/notes",className:"flex items-center gap-3 p-4 text-foreground hover:bg-muted/50 rounded-lg transition-all duration-200 transform hover:scale-105 group",children:[c.jsx("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors",children:c.jsx(k,{className:"h-4 w-4 text-primary"})}),c.jsx("span",{className:"font-medium",children:"View Notes"})]}),c.jsxs("button",{onClick:()=>{r(),s("/")},className:"flex items-center gap-3 p-4 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 transform hover:scale-105 w-full group",children:[c.jsx("div",{className:"p-2 bg-red-100 rounded-lg group-hover:bg-red-200 transition-colors",children:c.jsx(C,{className:"h-4 w-4 text-red-600"})}),c.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),c.jsxs("div",{className:"sentience-card p-6 animate-fade-in-up",style:{animationDelay:"0.2s"},children:[c.jsxs("h3",{className:"text-xl font-semibold text-foreground mb-6 flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),"Data Management"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>I(!o),className:"flex items-center gap-3 p-4 text-foreground hover:bg-muted/50 rounded-lg transition-all duration-200 transform hover:scale-105 w-full group",children:[c.jsx("div",{className:"p-2 bg-primary/10 rounded-lg group-hover:bg-primary/20 transition-colors",children:c.jsx(S,{className:"h-4 w-4 text-primary"})}),c.jsx("span",{className:"font-medium",children:"Data Settings"})]}),o&&c.jsxs("div",{className:"space-y-4 p-4 bg-muted/30 rounded-lg animate-fade-in-scale",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-sm font-medium text-foreground",children:"Storage Usage"}),c.jsxs("span",{className:"text-sm font-bold text-primary",children:[Math.round(B.percentage),"%"]})]}),c.jsx("div",{className:"w-full bg-muted rounded-full h-3 overflow-hidden",children:c.jsx("div",{className:x("h-3 rounded-full transition-all duration-500 ease-out",B.percentage>80?"bg-gradient-to-r from-red-500 to-red-600":B.percentage>60?"bg-gradient-to-r from-yellow-500 to-yellow-600":"bg-gradient-to-r from-green-500 to-green-600"),style:{width:`${B.percentage}%`}})}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:[B.used,"MB used of ",B.total,"MB"]})]}),c.jsxs("div",{className:"space-y-2 pt-2 border-t border-border/50",children:[c.jsxs("button",{onClick:()=>{g.downloadData()},className:"flex items-center gap-2 w-full p-3 text-sm text-foreground hover:bg-muted/50 rounded-lg transition-all duration-200 transform hover:scale-105 group",children:[c.jsx(D,{className:"h-4 w-4 text-primary group-hover:scale-110 transition-transform"}),"Export Data"]}),c.jsxs("label",{className:"flex items-center gap-2 w-full p-3 text-sm text-foreground hover:bg-muted/50 rounded-lg transition-all duration-200 transform hover:scale-105 cursor-pointer group",children:[c.jsx(O,{className:"h-4 w-4 text-primary group-hover:scale-110 transition-transform"}),"Import Data",c.jsx("input",{type:"file",accept:".json",onChange:e=>{var r;const a=null==(r=e.target.files)?void 0:r[0];if(!a)return;const s=new FileReader;s.onload=e=>{var r;try{const a=JSON.parse(null==(r=e.target)?void 0:r.result);g.importData(a)&&T(g.getStorageUsage())}catch(a){f({title:"Import failed",description:"Invalid file format. Please select a valid backup file.",variant:"destructive"})}},s.readAsText(a)},className:"hidden"})]}),c.jsxs("button",{onClick:()=>{window.confirm("Are you sure you want to clear all your data? This action cannot be undone.")&&(g.clearAllData(),T(g.getStorageUsage()),f({title:"Data cleared",description:"All your data has been cleared successfully."}))},className:"flex items-center gap-2 w-full p-3 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 transform hover:scale-105 group",children:[c.jsx(P,{className:"h-4 w-4 group-hover:scale-110 transition-transform"}),"Clear All Data"]})]})]})]})]}),B.percentage>80&&c.jsxs("div",{className:"sentience-card p-6 border-l-4 border-yellow-400 bg-gradient-to-r from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-900/10 animate-fade-in-up",style:{animationDelay:"0.3s"},children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:"p-2 bg-yellow-200 dark:bg-yellow-900/40 rounded-lg",children:c.jsx(U,{className:"h-4 w-4 text-yellow-700 dark:text-yellow-300"})}),c.jsx("span",{className:"text-sm font-semibold text-yellow-800 dark:text-yellow-200",children:"Storage Warning"})]}),c.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-200/80 leading-relaxed",children:"Your storage is almost full. Consider exporting and clearing old data to free up space."})]})]})]})})}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted/20",children:c.jsx("div",{className:"sentience-card p-8 max-w-md w-full mx-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent mx-auto mb-6"}),c.jsx("p",{className:"text-muted-foreground text-lg",children:"Redirecting to login..."})]})})})};export{I as default};
