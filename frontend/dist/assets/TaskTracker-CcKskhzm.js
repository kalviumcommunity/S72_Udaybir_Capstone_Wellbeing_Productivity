var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,d=(e,s)=>{for(var t in s||(s={}))a.call(s,t)&&l(e,t,s[t]);if(r)for(var t of r(s))i.call(s,t)&&l(e,t,s[t]);return e},n=(e,r)=>s(e,t(r)),c=(e,s,t)=>new Promise((r,a)=>{var i=e=>{try{d(t.next(e))}catch(s){a(s)}},l=e=>{try{d(t.throw(e))}catch(s){a(s)}},d=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,l);d((t=t.apply(e,s)).next())});import{r as o,j as m}from"./ui-BA0cATE-.js";import{C as h,a as x,B as u,c as g,b as p}from"./button-DKtl-THQ.js";import{L as j,I as v}from"./label-BgLNCOK5.js";import{B as f}from"./badge-DQ5FJ1CI.js";import{S as y,a as b,b as N,c as k,d as w}from"./select-BSwI4t9y.js";import{D,a as T,b as S,c as C,d as O,T as E}from"./dialog-YMOs-iro.js";import{D as F,e as P,f as _,h as I,u as A,i as $,t as z}from"./index-JY87KjIa.js";import{d as J,b as L,q as M,v as U,e as V,l as q,Z as B,Y as H,V as Y,P as Z}from"./icons-DpmH63Q2.js";import{c as G}from"./sanitize-uDIYLF3f.js";import"./vendor-Z2Iecplj.js";import"./utils-Dyq5Ev4R.js";import"./index-B7-UbheF.js";const K=({task:e,onUpdate:s,onStatusChange:t,onDelete:r})=>{var a,i;const[l,p]=o.useState(!1),[A,$]=o.useState({title:e.title,description:e.description,priority:e.priority,dueDate:e.dueDate?e.dueDate.split("T")[0]:"",estimatedTime:(null==(a=e.estimatedTime)?void 0:a.toString())||"",tags:(null==(i=e.tags)?void 0:i.join(", "))||""}),z=e=>{switch(e){case"todo":return"To Do";case"in_progress":return"In Progress";case"done":return"Done";default:return e}},Z=e=>new Date(e).toLocaleDateString();return m.jsxs(h,{className:"hover:shadow-lg hover:scale-[1.02] transition-all duration-200 cursor-pointer",children:[m.jsx(x,{className:"pb-3",children:m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-semibold text-lg mb-2",children:e.title}),m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx(f,{className:`${(e=>{switch(e){case"high":return"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800/40";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:border-yellow-800/40";case"low":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800/40";default:return"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800/40 dark:text-gray-200 dark:border-gray-700"}})(e.priority)} font-medium`,children:e.priority.charAt(0).toUpperCase()+e.priority.slice(1)}),m.jsx(f,{className:`${(e=>{switch(e){case"todo":default:return"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800/40 dark:text-gray-200 dark:border-gray-700";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-800/40";case"done":return"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-800/40"}})(e.status)} font-medium`,children:z(e.status)})]})]}),m.jsxs(F,{children:[m.jsx(P,{asChild:!0,children:m.jsxs(u,{variant:"outline",size:"sm",className:"hover:bg-primary/10 hover:border-primary/30",children:["Move to",m.jsx(J,{className:"ml-1 h-4 w-4"})]})}),m.jsx(_,{children:(G=e.status,["todo","in_progress","done"].filter(e=>e!==G)).map(s=>m.jsxs(I,{onClick:()=>t(e._id,s),className:"flex items-center gap-2",children:["todo"===s&&m.jsx(L,{className:"h-4 w-4"}),"in_progress"===s&&m.jsx(M,{className:"h-4 w-4"}),"done"===s&&m.jsx(U,{className:"h-4 w-4"}),z(s)]},s))})]})]})}),m.jsxs(g,{className:"pt-0",children:[e.description&&m.jsx("p",{className:"text-muted-foreground mb-4 line-clamp-2",children:e.description}),m.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.dueDate&&m.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[m.jsx(V,{className:"h-4 w-4"}),m.jsxs("span",{children:["Due: ",Z(e.dueDate)]})]}),e.estimatedTime&&m.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[m.jsx(q,{className:"h-4 w-4"}),m.jsx("span",{children:(e=>{if(e<60)return`${e}m`;const s=Math.floor(e/60),t=e%60;return t>0?`${s}h ${t}m`:`${s}h`})(e.estimatedTime)})]})]}),e.tags&&e.tags.length>0&&m.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:e.tags.map((e,s)=>m.jsxs(f,{variant:"outline",className:"text-xs",children:[m.jsx(B,{className:"h-3 w-3 mr-1"}),e]},s))}),m.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border/50",children:[m.jsxs("div",{className:"text-xs text-muted-foreground",children:["Created: ",Z(e.createdAt)]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs(D,{open:l,onOpenChange:p,children:[m.jsx(T,{asChild:!0,children:m.jsxs(u,{variant:"outline",size:"sm",className:"hover:bg-primary/10 hover:border-primary/30",children:[m.jsx(H,{className:"h-4 w-4 mr-1"}),"Edit"]})}),m.jsxs(S,{children:[m.jsx(C,{children:m.jsx(O,{children:"Edit Task"})}),m.jsxs("div",{className:"grid gap-4 py-4",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"edit-title",children:"Title"}),m.jsx(v,{id:"edit-title",value:A.title,onChange:e=>$(n(d({},A),{title:e.target.value}))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"edit-description",children:"Description"}),m.jsx(E,{id:"edit-description",value:A.description,onChange:e=>$(n(d({},A),{description:e.target.value}))})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"edit-priority",children:"Priority"}),m.jsxs(y,{value:A.priority,onValueChange:e=>$(n(d({},A),{priority:e})),children:[m.jsx(b,{children:m.jsx(N,{})}),m.jsxs(k,{children:[m.jsx(w,{value:"low",children:"Low"}),m.jsx(w,{value:"medium",children:"Medium"}),m.jsx(w,{value:"high",children:"High"})]})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"edit-dueDate",children:"Due Date"}),m.jsx(v,{id:"edit-dueDate",type:"date",value:A.dueDate,onChange:e=>$(n(d({},A),{dueDate:e.target.value}))})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"edit-estimatedTime",children:"Estimated Time (min)"}),m.jsx(v,{id:"edit-estimatedTime",type:"number",value:A.estimatedTime,onChange:e=>$(n(d({},A),{estimatedTime:e.target.value}))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"edit-tags",children:"Tags (comma-separated)"}),m.jsx(v,{id:"edit-tags",value:A.tags,onChange:e=>$(n(d({},A),{tags:e.target.value}))})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx(u,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),m.jsx(u,{onClick:()=>c(null,null,function*(){yield s(e._id,{title:A.title,description:A.description,priority:A.priority,dueDate:A.dueDate||void 0,estimatedTime:A.estimatedTime?parseInt(A.estimatedTime):void 0,tags:A.tags?A.tags.split(",").map(e=>e.trim()):[]}),p(!1)}),children:"Save Changes"})]})]})]}),m.jsxs(u,{variant:"outline",size:"sm",onClick:()=>r(e._id),className:"hover:bg-destructive/10 hover:border-destructive/30 hover:text-destructive",children:[m.jsx(Y,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})]})]});var G},Q=()=>{const{currentUser:e}=A(),[s,t]=o.useState([]),[r,a]=o.useState(!1),[i,l]=o.useState(!0),[F,P]=o.useState(!1),[_,I]=o.useState({title:"",description:"",priority:"medium",status:"todo",dueDate:"",estimatedTime:"",tags:""});o.useEffect(()=>{c(null,null,function*(){try{const s=yield fetch("https://sentience.onrender.com/api/health");if(P(s.ok),s.ok&&e){const e=yield $.getAll();t(e)}else{const e=JSON.parse(localStorage.getItem("tasks")||"[]");t(e)}}catch(s){console.error("Error loading tasks:",s);const e=JSON.parse(localStorage.getItem("tasks")||"[]");t(e)}finally{l(!1)}})},[e]);const J=r=>c(null,null,function*(){if(!_.title.trim())return void z({title:"Error",description:"Task title is required.",variant:"destructive"});const i=n(d({},r),{title:G(r.title||""),description:G(r.description||"")});try{if(F&&e){const e=yield $.create(i);t([e,...s])}else{const e=[n(d({_id:Date.now().toString()},i),{createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()}),...s];t(e),localStorage.setItem("tasks",JSON.stringify(e))}z({title:"Success!",description:"Task created successfully."}),I({title:"",description:"",priority:"medium",status:"todo",dueDate:"",estimatedTime:"",tags:""}),a(!1)}catch(l){console.error("Error creating task:",l),z({title:"Error",description:"Failed to create task. Please try again.",variant:"destructive"})}}),L=(r,a)=>c(null,null,function*(){try{if(F&&e){const e=yield $.update(r,a);t(s.map(s=>s._id===r?e:s))}else{const e=s.map(e=>e._id===r?n(d(d({},e),a),{updatedAt:(new Date).toISOString()}):e);t(e),localStorage.setItem("tasks",JSON.stringify(e))}z({title:"Success!",description:"Task updated successfully."})}catch(i){console.error("Error updating task:",i),z({title:"Error",description:"Failed to update task. Please try again.",variant:"destructive"})}}),M=(e,s)=>c(null,null,function*(){yield L(e,{status:s})}),U=r=>c(null,null,function*(){try{if(F&&e)yield $.delete(r),t(s.filter(e=>e._id!==r));else{const e=s.filter(e=>e._id!==r);t(e),localStorage.setItem("tasks",JSON.stringify(e))}z({title:"Success!",description:"Task deleted successfully."})}catch(a){console.error("Error deleting task:",a),z({title:"Error",description:"Failed to delete task. Please try again.",variant:"destructive"})}}),V=e=>s.filter(s=>s.status===e).length;return i?m.jsx("div",{className:"page-container",children:m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx("div",{className:"text-muted-foreground",children:"Loading tasks..."})})}):m.jsxs("div",{className:"page-container",children:[m.jsxs("header",{className:"mb-8 animate-slide-in",children:[m.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Task Tracker"}),m.jsx("p",{className:"text-muted-foreground mt-1",children:"Organize your tasks and track your progress"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[m.jsx(h,{children:m.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[m.jsx(p,{className:"text-sm font-medium",children:"Total Tasks"}),m.jsx(f,{variant:"secondary",children:s.length})]})}),m.jsx(h,{children:m.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[m.jsx(p,{className:"text-sm font-medium",children:"To Do"}),m.jsx(f,{variant:"outline",children:V("todo")})]})}),m.jsx(h,{children:m.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[m.jsx(p,{className:"text-sm font-medium",children:"In Progress"}),m.jsx(f,{variant:"outline",children:V("in_progress")})]})}),m.jsx(h,{children:m.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[m.jsx(p,{className:"text-sm font-medium",children:"Completed"}),m.jsx(f,{variant:"outline",children:V("done")})]})})]}),m.jsx("div",{className:"mb-6",children:m.jsxs(D,{open:r,onOpenChange:a,children:[m.jsx(T,{asChild:!0,children:m.jsxs(u,{className:"w-full sm:w-auto",children:[m.jsx(Z,{className:"mr-2 h-4 w-4"}),"Add New Task"]})}),m.jsxs(S,{className:"sm:max-w-[425px]",children:[m.jsx(C,{children:m.jsx(O,{children:"Add New Task"})}),m.jsxs("div",{className:"grid gap-4 py-4",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"title",children:"Title *"}),m.jsx(v,{id:"title",value:_.title,onChange:e=>I(n(d({},_),{title:e.target.value})),placeholder:"Enter task title"})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"description",children:"Description"}),m.jsx(E,{id:"description",value:_.description,onChange:e=>I(n(d({},_),{description:e.target.value})),placeholder:"Enter task description"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"priority",children:"Priority"}),m.jsxs(y,{value:_.priority,onValueChange:e=>I(n(d({},_),{priority:e})),children:[m.jsx(b,{children:m.jsx(N,{})}),m.jsxs(k,{children:[m.jsx(w,{value:"low",children:"Low"}),m.jsx(w,{value:"medium",children:"Medium"}),m.jsx(w,{value:"high",children:"High"})]})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"status",children:"Status"}),m.jsxs(y,{value:_.status,onValueChange:e=>I(n(d({},_),{status:e})),children:[m.jsx(b,{children:m.jsx(N,{})}),m.jsxs(k,{children:[m.jsx(w,{value:"todo",children:"To Do"}),m.jsx(w,{value:"in_progress",children:"In Progress"}),m.jsx(w,{value:"done",children:"Done"})]})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"dueDate",children:"Due Date"}),m.jsx(v,{id:"dueDate",type:"date",value:_.dueDate,onChange:e=>I(n(d({},_),{dueDate:e.target.value}))})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"estimatedTime",children:"Estimated Time (min)"}),m.jsx(v,{id:"estimatedTime",type:"number",value:_.estimatedTime,onChange:e=>I(n(d({},_),{estimatedTime:e.target.value})),placeholder:"60"})]})]}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx(j,{htmlFor:"tags",children:"Tags (comma-separated)"}),m.jsx(v,{id:"tags",value:_.tags,onChange:e=>I(n(d({},_),{tags:e.target.value})),placeholder:"work, urgent, project"})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx(u,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),m.jsx(u,{onClick:()=>{const e={title:_.title,description:_.description,priority:_.priority,status:_.status,dueDate:_.dueDate||void 0,estimatedTime:_.estimatedTime?Number(_.estimatedTime):void 0,tags:_.tags?_.tags.split(",").map(e=>e.trim()).filter(e=>e):void 0};J(e)},children:"Add Task"})]})]})]})}),m.jsx("div",{className:"space-y-4",children:0===s.length?m.jsx(h,{children:m.jsx(g,{className:"flex flex-col items-center justify-center py-12",children:m.jsxs("div",{className:"text-muted-foreground text-center",children:[m.jsx("p",{className:"text-lg font-medium mb-2",children:"No tasks yet"}),m.jsx("p",{className:"text-sm",children:"Create your first task to get started!"})]})})}):s.map(e=>m.jsx(K,{task:e,onUpdate:L,onStatusChange:M,onDelete:U},e._id))})]})};export{Q as default};
